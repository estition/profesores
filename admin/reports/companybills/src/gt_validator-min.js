Sigma.Validator={hasDepend:/^datetime|^date|^time|^minlength|^maxlength|^DT|^D|^T|^MINL|^MAXL/,hasArgument:/^equals|^lessthen|^EQ|^LT/,DATE_FORMAT:"yyyy-MM-dd",TIME_FORMAT:"HH:mm:ss",DATETIME_FORMAT:"yyyy-MM-dd HH:mm:ss",KeyMapping:{R:"required",DT:"datetime",D:"date",T:"time",E:"email",ID:"idcard",N:"number","int":"integer",I:"integer",F:"float",M:"money",RG:"range",EQ:"equals",LT:"lessthen",GT:"greatethen",U:"url",ENC:"enchar",CNC:"cnchar",MINL:"minlength",MAXL:"maxlength"},RegExpLib:{email:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,number:/^\d+$/,integer:/^[1-9]\d*|0$/,"float":/^([1-9]\d*\.\d+|0\.\d+|[1-9]\d*|0)$/,money:/^([1-9]\d*\.\d{1,2}|0\.\d{1,2}|[1-9]\d*|0)$/,telephone:/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,16})+$/,enchar:/^[ \w]*$/,cnchar:/^[\u4E00-\u9FA5\uF900-\uFA2D]*$/,idcard:/^(\d{15}|\d{18}|\d{17}X?)$/i},getValidator:function(a){return Sigma.Validator[a]},getMessage:function(msgKey){var msg=Sigma.Msg.Validator["default"][msgKey];if(!msg){msg=Sigma.Msg.Validator["default"][Sigma.Validator.KeyMapping[msgKey]]}var _format=((Sigma.Validator.KeyMapping[msgKey]||msgKey)+"_FORMAT").toUpperCase();_format=Sigma.Validator[_format];var wordNum=(" "+msg).split(/\{[0-9]/).length-1;for(var i=1;i<=wordNum;i++){var ns=arguments[i];if(i==2){ns=ns||_format}var rex;eval("rex = /{("+(i-1)+"[^#}]*)#?([^}]*)}/;");var ostring=rex.exec(msg);if(ostring&&ostring.length>2){if(!ns){msg=Sigma.U.replaceAll(msg,ostring[0]," "+ostring[2]+" ")}else{msg=Sigma.U.replaceAll(msg,ostring[0]," "+ns+" ")}}}return msg},required:function(a){if(a===null||a===undefined){return false}if(typeof(a)!="string"&&a.length){if(a.length<1){return false}for(var b=0;b<a.length;b++){var c=Sigma.Validator.required(a[b]);if(c){return true}}return false}return Sigma.U.trim(a+"").length>0},telephone:function(a){if(!Sigma.Validator.RegExpLib.telephone.exec(a)){return false}return true},email:function(a){return a&&Sigma.Validator.RegExpLib.email.test(a)},enchar:function(a){return a&&Sigma.Validator.RegExpLib.enchar.test(a)},cnchar:function(a){return a&&Sigma.Validator.RegExpLib.cnchar.test(a)},number:function(a){return !isNaN(a/1)},integer:function(a){return(String(a).indexOf(".")<0)&&!isNaN(a/1)&&Sigma.Validator.RegExpLib.integer.test(Math.abs(a))},"float":function(a){return !isNaN(a/1)&&Sigma.Validator.RegExpLib["float"].test(Math.abs(a))},money:function(a){return !isNaN(a/1)&&Sigma.Validator.RegExpLib.money.test(a)},idcard:function(b){if(!b||b.length<15||!Sigma.Validator.RegExpLib.idcard.test(b)){return false}var a;if(b.length==18){a=b.substr(6,8)}else{a="19"+b.substr(6,6)}return Sigma.Validator.date(a,"YYYYMMDD")},date:function(c,j){c=[].concat(c);if(!j||j.length<1){j=Sigma.Validator.DATE_FORMAT}j=j.toUpperCase();var b=j.replace(/([$^.*+?=!:|\/\\\(\)\[\]\{\}])/g,"\\$1");b=b.replace("YYYY","([0-9]{4})");b=b.replace("YY","([0-9]{2})");b=b.replace("MM","(0[1-9]|10|11|12)");b=b.replace("M","([1-9]|10|11|12)");b=b.replace("DD","(0[1-9]|[12][0-9]|30|31)");b=b.replace("D","([1-9]|[12][0-9]|30|31)");b="^"+b+"$";var n=new RegExp(b);var h=0,f=1,d=1;var g=j.match(/(YYYY|YY|MM|M|DD|D)/g);for(var m=0;m<c.length;m++){if(!n.test(c[m])){return false}var l=n.exec(c[m]);for(var e=0;e<g.length;e++){switch(g[e]){case"YY":case"yy":var k=Number(l[e+1]);h=1900+(k<=30?k+100:k);break;case"YYYY":case"yyyy":h=Number(l[e+1]);break;case"M":case"MM":f=Number(l[e+1]);break;case"D":case"d":case"DD":case"dd":d=Number(l[e+1]);break}}var a=(h%4===0&&(h%100!==0||h%400===0));if(d>30&&(f==2||f==4||f==6||f==9||f==11)){return false}if(f==2&&(d==30||d==29&&!a)){return false}}return true},time:function(d,e){d=[].concat(d);if(!e||e.length<1){e=Sigma.Validator.TIME_FORMAT}var a=e.replace(/([.$?*!=:|{}\(\)\[\]\\\/^])/g,"\\$1");a=a.replace("HH","([01][0-9]|2[0-3])");a=a.replace("H","([0-9]|1[0-9]|2[0-3])");a=a.replace("mm","([0-5][0-9])");a=a.replace("m","([1-5][0-9]|[0-9])");a=a.replace("ss","([0-5][0-9])");a=a.replace("s","([1-5][0-9]|[0-9])");a="^"+a+"$";var c=new RegExp(a);for(var b=0;b<d.length;b++){if(!c.test(d[b])){return false}}return true},datetime:function(f,g){f=[].concat(f);var d=/^\S+ \S+$/;if(!g||g.length<1){g=Sigma.Validator.DATETIME_FORMAT}else{if(!d.test(g)){return false}}for(var e=0;e<f.length;e++){if(!d.test(f[e])){return false}var b=f[e].split(" ");var c=g.split(" ");var a=Sigma.Validator.date(b[0],c[0])&&Sigma.Validator.time(b[1],c[1]);if(!a){return false}}return true},range:function(c,b,a){if(!Sigma.$chk(b)){return c<=a}else{if(!Sigma.$chk(a)){return c>=b}}return c>=b&&c<=a},equals:function(c,a){a=[].concat(a);for(var b=0;b<a.length;b++){if(c==a){return true}}return false},lessthen:function(c,a){a=[].concat(a);for(var b=0;b<a.length;b++){if(c<=a){return true}}return false},greatethen:function(c,a){a=[].concat(a);for(var b=0;b<a.length;b++){if(c>=a){return true}}return false},minlength:function(b,a){return Sigma.$chk(b)&&(b+"").length>=a},maxlength:function(b,a){return Sigma.$chk(b)&&(b+"").length<=a}};(function(){for(var a in Sigma.Validator.KeyMapping){Sigma.Validator[a]=Sigma.Validator[Sigma.Validator.KeyMapping[a]]}})();